{
id: "smoke_generator",
ignore_collide: true,

hidden_in_game: true,
on_create: "[add_particles('smoke')]",
activation_border: 500,


on_gust: "[set(particle_systems['smoke'].accel_x,45),schedule(10d4,set(particle_systems['smoke'].accel_x,1d6-1))]",
timer_frequency: 20,
on_timer: "if(particle_systems['smoke'].accel_x < 40, set(particle_systems['smoke'].accel_x,1d6-1))",
on_end_anim: "animation('normal')",
zorder: "@include data/zorder.cfg:exterior_near_background",
editor_info: {
	category: "controllers, particles",
},
animation: {
	id: "normal",
	image: "effects/particles.png",
	x: 86,
	y: 42,
	w: 28,
	h: 28,
	frames: 1,
	duration: 1000,
},
particle_system: {
	id: "smoke",
	type: "simple",
	spawn_rate: 600,
	time_to_live: 300,
	pre_pump_cycles: 200,
	min_x: -20,
	max_x: 20,
	min_y: -14,
	max_y: 14,
	velocity_y: -200,
	velocity_x: -100,
	velocity_x_random: 200,
	velocity_y_random: 400,
	accel_x: 3,
	accel_y: -10,

	#color=255,255,255,255
	delta_a: 1,
	animation: {
		id: "sparkle",
		image: "effects/explosion.png",
		x: 198,
		y: 5,
		w: 17,
		h: 16,
		pad: 3,
		frames: 8,
		frames_per_row: 2,
		scale: 2,
		duration: 40,
	},
},
}